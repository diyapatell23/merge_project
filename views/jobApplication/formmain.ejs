<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        span {
            color: red;
            font-size: 14px;
            font-weight: lighter;
        }
    </style>
</head>

<body>

    <% if(user[0].Fname){ %>
        <form action="/task11/updateuser/<%=id%>" method="post" onsubmit="return validateform()" name="myform">
            <% } else{ %>
                <form action="/task11/adduser" method="post" onsubmit="return validateform()" name="myform">
                    <% } %>
                        <h1>Job Application Form</h1>
                        <fieldset>
                            <legend>
                                <h2>Basic Detail</h2>
                            </legend>

                            <label for="First Name">First Name : </label><input type="text" name="fname" id="fname"
                                value="<%=user[0].Fname%>" class="basic_check" /> &emsp;<span id="error_fname"></span>
                            <label for="Last Name">Last Name : </label><input type="text" name="lname" id="lname"
                                class="basic_check" value="<%=user[0].Lname%>">
                            <span id="error_lname"></span><br>
                            <br>

                            <label for="Designation ">Designation : </label><input type="text" name="designation"
                                id="designation" value="<%=user[0].Designation%>" class="basic_check"> &emsp;<span
                                id="error_designation"></span>
                            <label for="Address1">Address1 :</label> <input type="text" name="address1" id="address1"
                                value="<%=user[0].Address_1%>" class="address_check"><span
                                id="error_address1"></span><br>
                            <br>
                            <label for="Phone Number">Phone Number : </label><input type="text" name="contact_no"
                                value="<%=user[0].Phone_No%>" id="contact">&emsp;<span id="contacterror"></span>
                            <label for="Address2">Address2 : </label><input type="text" name="address2" id="address2"
                                value="<%=user[0].Address_2%>" class="address_check"><span
                                id="error_address2"></span><br>
                            <br>
                            <label for="Email">Email :</label> <input type="text" name="email" id="email"
                                value="<%=user[0].Email%>" class="email_check">&emsp;<span id="email_error"></span>
                            <label for="City ">City :</label> <input type="text" name="City" id="city"
                                class="address_check" value="<%=user[0].City%>"><span id="error_City"></span><br>
                            <br>
                            <label for="Relationship Status">Gender : </label><input type="radio" name="gender"
                                value="male" class="radio_check" id="male">Male
                            <input type="radio" name="gender" value="female" class="radio_check" id="female">female
                            &emsp;<span id="error_gender"></span>

                            <label for="State">State :</label><select name="state" id="state" <% if(user[0].state) { %>
                                value="
                                <%=user[0].state%>" <% }%> >
                                        <option value="gujarat" selected>Gujarat</option>
                                        <option value="maharashtra">Maharashtra</option>
                            </select><br>
                            <br>
                            <label for="Zip Code">Zip Code</label> <input type="text" name="zipcode" id="zipcode"
                                value="<%=user[0].Zip_code%>">&emsp;<span id="zipcodeerror"></span>
                            <label for="Date of Birth">Date of Birth : </label><input type="text" name="date"
                                placeholder="yyyy-mm-dd" <% if(user[0].DoB) { %> value ="<%=(user[0].DoB.getFullYear())
                                + '-' + (user[0].DoB.getMonth() +1) + '-' + user[0].DoB.getDate()%>" <%} %>
                                    id="birth_date" class="date_check"><span id="error_date"></span>
                        </fieldset>


                        <!-- education detail -->

                        <fieldset>
                            <legend>
                                <h2>Education Detail</h2>
                            </legend>
                            <span onclick="myfun()">
                                Add row
                            </span><br>
                            <div class="container" id="container">
                                <div class="child_container" id="child_container"><br>
                                    <input type="hidden" name="edu_id" id="edu_id" value="<%=user2[0].edu_id%>">
                                    <label for="board_name">Board Name: </label> <select name="education_detail"
                                        id="education_detail1">
                                        <option value="SSC">SSC</option>
                                        <option value="HSC">HSC</option>
                                        <option value="bachlor">Bachlor</option>
                                        <option value="master">Master</option>
                                    </select>
                                    <label for="year">Year: </label><input type="text" name="year" id="year1"
                                        class="education_year" value="<%=user2[0].year%>">
                                    <label for="percentage">Percentage: </label><input type="text" name="percentage"
                                        id="percentage1" value="<%=user2[0].percentage%>"
                                        class="education_percentage"><br><br>

                                    <input type="hidden" name="edu_id" id="edu_id" value="<%=user2[1].edu_id%>">
                                    <label for="board_name">Board Name: </label> <select name="education_detail"
                                        id="education_detail2">
                                        <option value="SSC">SSC</option>
                                        <option value="HSC">HSC</option>
                                        <option value="bachlor">Bachlor</option>
                                        <option value="master">Master</option>
                                    </select>
                                    <label for="year">Year: </label><input type="text" name="year" id="year2"
                                        class="education_year" value="<%=user2[1].year%>">
                                    <label for="percentage">Percentage: </label><input type="text" name="percentage"
                                        id="percentage2" value="<%=user2[1].percentage%>"
                                        class="education_percentage"><br><br>

                                    <input type="hidden" name="edu_id" id="edu_id" value="<%=user2[2].edu_id%>">
                                    <label for="board_name">Board Name: </label> <select name="education_detail"
                                        id="education_detail3">
                                        <option value="SSC">SSC</option>
                                        <option value="HSC">HSC</option>
                                        <option value="bachlor">Bachlor</option>
                                        <option value="master">Master</option>
                                    </select>
                                    <label for="year">Year: </label><input type="text" name="year" id="year3"
                                        class="education_year" value="<%=user2[2].year%>">
                                    <label for="percentage">Percentage: </label><input type="text" name="percentage"
                                        id="percentage3" value="<%=user2[2].percentage%>" class="education_percentage">
                                </div>
                            </div>
                            <span id="education_year_error"></span> <br>
                            <span id="education_percentage_error"></span>

                        </fieldset>


                        <!-- work experience -->

                        <fieldset>
                            <legend>
                                <h2>Work Experience</h2>
                            </legend>
                            <span onclick="myfun2()">
                                Add row
                            </span><br><br>
                            <div class="work_experience_container" id="work_experience_container">
                                <div class="work_experience_child_container" id="work_experience_child_container">
                                    <input type="hidden" name="work_id" id="work_id" value="<%=user3[0].work_id%>">
                                    <label for="Company name ">Company name : </label><input type="text" name="company1"
                                        value="<%=user3[0].company1_Name%>" id="company name" class="company_check">
                                    &emsp;
                                    <label for="Designation">Designation : </label><input type="text"
                                        name="designation1" value="<%=user3[0].company1_Designation%>" id="Designation"
                                        class="designation_check">
                                    &emsp;
                                    <label for=" From"> From :</label> <input type="text" name="from1" id="from1"
                                        class="datefrom_check" <% if(user3[0].company1_Joiningdate){%> value="
                                    <%=(user3[0].company1_Joiningdate.getFullYear())+ '-'
                                        +(user3[0].company1_Joiningdate.getMonth() +1) + '-'
                                        +user3[0].company1_Joiningdate.getDate()%>"<% } %> >&emsp;
                                            <label for="To">To: </label> <input type="text" name="to1" id="to1"
                                                class="dateto_check" <% if(user3[0].company1_Leavingdate) { %>value ="
                                            <%=(user[0].DoB.getFullYear()) + '-' +(user[0].DoB.getMonth() +1) + '-'
                                                +user[0].DoB.getDate()%>" <% } %> ><br>
                                                    <br>
                                                    <input type="hidden" name="work_id" id="work_id"
                                                        value="<%=user3[1].work_id%>">
                                                    <label for="Company name ">Company name : </label><input type="text"
                                                        name="company1" value="<%=user3[1].company1_Name%>"
                                                        id="company name" class="company_check">
                                                    &emsp;
                                                    <label for="Designation">Designation : </label><input type="text"
                                                        name="designation1" value="<%=user3[1].company1_Designation%>"
                                                        id="Designation" class="designation_check">
                                                    &emsp;
                                                    <label for=" From"> From :</label> <input type="text" name="from1"
                                                        id="from2" <% if(user3[1].company1_Joiningdate) { %> value = "
                                                    <%=(user3[1].company1_Joiningdate.getFullYear()) + '-'
                                                        +(user3[1].company1_Joiningdate.getMonth() +1) + '-'
                                                        +user3[1].company1_Joiningdate.getDate()%>" <%} %>
                                                            class="datefrom_check">&emsp;
                                                            <label for="To">To: </label> <input type="text" name="to1"
                                                                id="to2" <% if(user3[1].company1_Leavingdate) { %>
                                                            value= "<%=(user3[1].company1_Leavingdate.getFullYear())
                                                                + '-' +(user3[1].company1_Leavingdate.getMonth() +1)
                                                                + '-' +user3[1].company1_Leavingdate.getDate()%>" <%}%>
                                                                    class="dateto_check">
                                </div>
                            </div>
                            <span id="company_error"></span> <span id="designation_error"></span> <br>
                            <span id="joining_error"></span> <span id="leave_error"></span>

                        </fieldset>

                        <!-- language known -->

                        <fieldset>
                            <legend>
                                <h2>Language Known</h2>
                            </legend>
                            <input type="checkbox" name="language[]" value="hindi" class="checkbox_validation"
                                id="hindi"><label for="Hindi">Hindi</label>
                            <input type="checkbox" name="htype[]" value="read" class="hindi_check" id="hindiread"><label
                                for="read">read</label>
                            <input type="checkbox" name="htype[]" value="write" class="hindi_check"
                                id="hindiwrite"><label for="write">write</label>
                            <input type="checkbox" name="htype[]" value="speak" class="hindi_check"
                                id="hindispeak"><label for=" speak ">
                                speak </label>
                            <span id="hindi_error"></span>
                            <br>
                            <br>
                            <input type="checkbox" name="language[]" value="english" class="checkbox_validation"
                                id="english"><label for="English">English</label>
                            <input type="checkbox" name="etype[]" value="read" class="english_check"
                                id="englishread"><label for="read">read</label>
                            <input type="checkbox" name="etype[]" value="write" class="english_check"
                                id="englishwrite"><label for="write">write</label>
                            <input type="checkbox" name="etype[]" value="speak" class="english_check"
                                id="englishspeak"><label for="speak">speak</label>
                            <span id="english_error"></span>
                            <br>
                            <br>
                            <input type="checkbox" name="language[]" value="gujarati" class="checkbox_validation"
                                id="gujarati"><label for=" Gujarati">
                                Gujarati</label>
                            <input type="checkbox" name="gtype[]" value="read" class="gujarati_check"
                                id="gujaratiread"><label for="read">read</label>
                            <input type="checkbox" name="gtype[]" value="write" class="gujarati_check"
                                id="gujaratiwrite"><label for="write">write</label>
                            <input type="checkbox" name="gtype[]" value="speak" class="gujarati_check"
                                id="gujaratispeak"><label for=" speak">
                                speak</label><span id="gujarati_error"></span><br>
                            <span id="language_error"></span>

                        </fieldset>

                        <!-- technologies known -->

                        <fieldset>
                            <legend>
                                <h2>Technologies you know</h2>
                            </legend>
                            <input type="checkbox" name="type" value="php" class="technology_validation" id="php"><label
                                for="PHP">PHP</label>
                            <input type="radio" name="ptype" value="beginer" class="phptype_validation"
                                id="phpbeginer"><label for="beginer">beginer</label>
                            <input type="radio" name="ptype" value="mideator" class="phptype_validation"
                                id="phpmideator"><label for="mideator">mideator</label>
                            <input type="radio" name="ptype" value="expert" class="phptype_validation"
                                id="phpexpert"><label for="expert">expert</label> <span id="phptype_error"></span><br>

                            <br>
                            <input type="checkbox" name="type" value="mysql" class="technology_validation"
                                id="mysql"><label for="mysql">mysql</label>
                            <input type="radio" name="mtype" value="beginer" class="mysqltype_validation"
                                id="mysqlbeginer"><label for="beginer">beginer</label>
                            <input type="radio" name="mtype" value="mideator" class="mysqltype_validation"
                                id="mysqlmideator"><label for="mideator">mideator</label>
                            <input type="radio" name="mtype" value="expert" class="mysqltype_validation"
                                id="mysqlexpert"><label for="expert">expert</label> <span
                                id="mysqltype_error"></span><br>
                            <br>
                            <input type="checkbox" name="type" value="larave" class="technology_validation" id="larave">
                            <label for="larave">larave</label>
                            <input type="radio" name="ltype" value="beginer" class="laravetype_validation"
                                id="laravebeginer"><label for="beginer">beginer</label>
                            <input type="radio" name="ltype" value="mideator" class="laravetype_validation"
                                id="laravemideator"><label for="mideator">mideator</label>
                            <input type="radio" name="ltype" value="expert" class="laravetype_validation"
                                id="laraveexpert"><label for="expert">expert</label> <span
                                id="laravetype_error"></span><br>
                            <br>
                            <input type="checkbox" name="type" value="oracle" class="technology_validation"
                                id="oracle"><label for="oracle">oracle</label>
                            <input type="radio" name="otype" value="beginer" class="oracletype_validation"
                                id="oraclebeginer"><label for="beginer">beginer</label>
                            <input type="radio" name="otype" value="mideator" class="oracletype_validation"
                                id="oraclemideator"><label for="mideator">mideator</label>
                            <input type="radio" name="otype" value="expert" class="oracletype_validation"
                                id="oracleexpert"><label for="expert">expert</label><span
                                id="oracletype_error"></span><br>
                            <span id="technology_error"></span>
                        </fieldset>

                        <!-- reference contact -->

                        <fieldset>
                            <legend>
                                <h2>Reference Contact</h2>
                            </legend>
                            <span onclick="myfun3()">
                                Add row
                            </span><br><br>
                            <div class="reference_container" id="reference_container">
                                <div class="reference_child_container" id="reference_child_container">
                                    <label for="Name">Name :</label> <input type="text" name="name1" id="name1"
                                        value="<%=user6[0].person_name%>" class="reference_check"><span
                                        id="error_name1"></span>&emsp;
                                    <label for="Contact No ">Contact No : </label><input type="text" name="contact1"
                                        id="contact1" value="<%=user6[0].person_contactNo%>"
                                        class="reference_contact_check"><span id="error_contact1"></span>&emsp;
                                    <label for="Relation">Relation : </label><input type="text" name="relation1"
                                        id="relation1" value="<%=user6[0].person_relation%>"
                                        class="reference_relation_check"><span id="error_relation1"></span><br>
                                    <br>
                                </div>
                            </div>
                            <span id="reference_contact_error"></span><br>
                            <span id="reference_relation_error"></span>
                        </fieldset>

                        <!-- preferances -->

                        <fieldset>
                            <legend>
                                <h2>
                                    Preferances
                                </h2>
                            </legend>
                            <label for="Prefered Location ">Prefered Location</label><input type="text"
                                name="preferedlocation" value="<%=user7[0].Prefered_location%>" id="prefered location"
                                class="basic_check"><span id="error_preferedlocation"></span><br>
                            <br>
                            <label for="Notice peroid ">Notice peroid </label><input type="text" name="noticeperiod"
                                id="notice period" value="<%=user7[0].Notice_period%>" class="address_check"><span
                                id="error_noticeperiod"></span> <br>
                            <br>
                            <label for="Expected CTC">Expected CTC </label><input type="text" name="Expected_CTC"
                                value="<%=user7[0].Expected_CTC%>" id="Expected_CTC"><span id="ctc_error1"></span>
                            &emsp;
                            <label for="Current CTC ">Current CTC </label><input type="text" name="Current_CTC"
                                id="Current_CTC" value="<%=user7[0].Current_CTC%>"> <span id="ctc_error2"></span><br>
                            <br>
                            Department : <select name="dept" id="dept">
                                <option value="design">Design</option>
                                <option value="marketing">Marketing</option>
                            </select>
                        </fieldset>
                        <% if(user[0].Fname){ %>
                            <input type="submit" value="update">
                            <% } else {%>
                                <input type="submit" value="submit">
                                <% } %>
                                    <script src="/jobApplication/script.js"></script>
                                    <script>

                                        function myfun() {
                                            const node = document.getElementById('child_container');
                                            console.log(node);
                                            const clone = node.cloneNode(true);
                                            document.getElementById('container').appendChild(clone);
                                        }

                                        function myfun2() {
                                            const node = document.getElementById('work_experience_child_container');
                                            const clone = node.cloneNode(true);
                                            document.getElementById('work_experience_container').appendChild(clone);
                                        }

                                        function myfun3() {
                                            const node = document.getElementById('reference_child_container');
                                            const clone = node.cloneNode(true);
                                            document.getElementById('reference_container').appendChild(clone);
                                        }

                                        if (`<%=user[0].State%>`) {
                                            document.getElementById('state').value = "<%=user[0].State%>";
                                        }
                                        if (`<%=user7[0].Department %>`) {
                                            document.getElementById('dept').value = "<%=user7[0].Department %>";
                                        }
                                        if (`<%=user2[0].board_name%>`) {
                                            document.getElementById('education_detail1').value = "<%=user2[0].board_name%>";
                                        }
                                        if (`<%=user2[1].board_name%>`) {
                                            document.getElementById('education_detail2').value = "<%=user2[1].board_name%>"
                                        }
                                        if (`<%=user2[2].board_name%>`) {
                                            document.getElementById('education_detail3').value = "<%=user2[2].board_name%>"
                                        }
                                        if (`<%=user[0].Gender%>` == "male") {
                                            document.getElementById('male').checked = true;
                                        }
                                        else {
                                            document.getElementById('female').checked = true;
                                        }

                                        let languages = JSON.parse(`<%-JSON.stringify(user4)%>`);
                                        console.log(languages);
                                        for (let i = 0; i < languages.length; i++) {
                                            if (languages[i].language) {
                                                console.log(languages[i].language)
                                                document.getElementById(`${languages[i].language}`).checked = true;
                                                if (languages[i].L_read == "yes") {
                                                    document.getElementById(`${languages[i].language}read`).checked = true;
                                                }
                                                if (languages[i].L_write == "yes") {
                                                    document.getElementById(`${languages[i].language}write`).checked = true;
                                                }
                                                if (languages[i].L_speak == "yes") {
                                                    document.getElementById(`${languages[i].language}speak`).checked = true;
                                                }
                                            }
                                        }

                                        let technologies = JSON.parse(`<%-JSON.stringify(user5)%>`);
                                        console.log(technologies);
                                        for (let i = 0; i < technologies.length; i++) {
                                            if (technologies[i].tech_name) {
                                                document.getElementById(`${technologies[i].tech_name}`).checked = true;
                                                if (technologies[i].tech_level == "beginer") {
                                                    document.getElementById(`${technologies[i].tech_name}beginer`).checked = true;
                                                }
                                                if (technologies[i].tech_level == "mideator") {
                                                    document.getElementById(`${technologies[i].tech_name}mideator`).checked = true;
                                                }
                                                if (technologies[i].tech_level == "expert") {
                                                    document.getElementById(`${technologies[i].tech_name}expert`).checked = true;
                                                }
                                            }
                                        }


                                    </script>
                </form>
</body>

</html>